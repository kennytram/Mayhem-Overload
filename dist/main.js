!function(){"use strict";!function(){const e={GRAVITY:.2,FLAP_SPEED:5,TERMINAL_VEL:5,BAR_SPEED:5};var t=class{constructor(e,t,s){this.xPos=0,this.yPos=0,this.sprite=e,this.posType=t,this.unitTypeArr=s,this.isAlive=!0,this.spriteWidth=null,this.spriteHeight=null,this.vel=0,this.isMidAir=!1,this.userInputs=[]}initializeSpritePos(t){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if("rightSide"===this.posType)"../src/space_balloon_images/space_balloon_death.png"===this.sprite&&(this.sprite="../src/space_balloon_images/flap_default.png"),this.xPos=Math.floor(t.canvas.width-t.canvas.width/3),this.yPos=Math.floor(t.canvas.height/4),e.FLAP_SPEED=Math.floor(t.canvas.height/80),e.TERMINAL_VEL=Math.floor(t.canvas.height/80),e.GRAVITY=Math.max(Math.floor(t.canvas.width/800),.2);else if("bottomSide"===this.posType)this.xPos=Math.floor(t.canvas.width/2),this.yPos=t.canvas.height;else if("topLeft"===this.posType)this.xPos=0,this.yPos=0;else if("random"===this.posType&&this.unitTypeArr.includes("enemy"))if(null!=s){do{this.xPos=t.canvas.width*Math.random()}while(Math.abs(this.xPos-s.xPos)<=t.canvas.width/4);do{this.yPos=t.canvas.height*Math.random()}while(Math.abs(this.yPos-s.yPos)<=t.canvas.height/4)}else this.xPos=t.canvas.width*Math.random()-t.canvas.width,this.yPos=t.canvas.height*Math.random()}reset(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this;this.isMidAir=!1,this.isAlive=!0,this.userInputs=[],this.initializeSpritePos(e,t)}animate(e){if(this.sprite){this.isMidAir&&this.moveAir(e);let t=new Image;t.src=this.sprite;const s=this;t.onload=function(){s.spriteWidth=t.width,s.spriteHeight=t.height,s.posType.includes("wall")?(s.xPos=e.canvas.width-s.spriteWidth,s.spriteHeight=e.canvas.height,e.drawImage(t,s.xPos,0,s.spriteWidth,s.spriteHeight)):s.posType.includes("rightSide")?(s.spriteWidth=3*t.width,s.spriteHeight=3*t.height,s.isAlive?e.drawImage(t,s.xPos+s.spriteWidth,s.yPos,s.spriteWidth,s.spriteHeight):e.drawImage(t,Math.floor(s.xPos+s.spriteWidth/3),s.yPos,s.spriteWidth,s.spriteHeight)):s.posType.includes("bottomSide")?(s.spriteWidth=3*t.width,s.spriteHeight=3*t.height,e.drawImage(t,Math.floor(s.xPos-s.spriteWidth/2),s.yPos-s.spriteHeight,s.spriteWidth,s.spriteHeight)):s.posType.includes("topLeft")?(s.spriteWidth=t.width,s.spriteHeight=t.height,e.drawImage(t,s.xPos,s.yPos,s.spriteWidth,s.spriteHeight),e.drawImage(t,e.canvas.width-s.spriteWidth,s.yPos,s.spriteWidth,s.spriteHeight)):s.unitTypeArr.includes("enemy")&&s.posType.includes("random")?(s.spriteWidth=3*t.width,s.spriteHeight=3*t.height,s.xPos+=5,s.xPos>=e.canvas.width+s.spriteWidth&&s.initializeSpritePos(e),e.drawImage(t,s.xPos+s.spriteWidth,s.yPos,s.spriteWidth,s.spriteHeight)):e.drawImage(t,s.xPos+t.width,s.yPos+t.height,e.canvas.width/10,e.canvas.height/10)}}}move(e,t){const s=Math.floor(this.xPos+e[0]+this.spriteWidth),i=Math.floor(this.yPos+e[1]);s>=0&&s<=t.canvas.width-this.spriteWidth&&i>=0&&i<=t.canvas.height-this.spriteHeight&&(this.xPos+=e[0],this.yPos+=e[1])}enemyMove(e,t){this.xPos+=e[0],this.yPos+=e[1]}collidesWith(e){let t=!1;var s,i;return i=e,(s=this).xPos>i.xPos+i.spriteWidth||s.xPos+s.spriteWidth<i.xPos||s.yPos>i.yPos+i.spriteHeight||s.yPos+s.spriteHeight<i.yPos||(t=!0),t}moveAir(t){this.isMidAir=!0,this.yPos<0?(this.yPos=0,this.vel=0):this.yPos+this.spriteHeight>=t.canvas.height?(this.yPos=t.canvas.height-this.spriteHeight,this.isAlive=!1,this.sprite="../src/space_balloon_images/space_balloon_death.png"):this.yPos+=this.vel,this.vel+=e.GRAVITY,Math.abs(this.vel)>e.TERMINAL_VEL&&(this.vel>0?this.vel=e.TERMINAL_VEL:this.vel=-1*e.TERMINAL_VEL)}mash(){return e.BAR_SPEED}flap(){this.vel=-1*e.FLAP_SPEED,this.sprite="../src/space_balloon_images/flap_down.png";const t=this;setTimeout((function(){t.sprite="../src/space_balloon_images/flap_up.png"}),100),setTimeout((function(){t.sprite="../src/space_balloon_images/flap_default.png"}),200)}ddr(e){this.userInputs.push(e)}},s={blowBar:["../src/blow_images/blow1.png","../src/blow_images/blow2.png","../src/blow_images/blow3.png","../src/blow_images/blow4.png","../src/blow_images/blow5.png","../src/blow_images/blow6.png"],spaceBalloon:["../src/space_balloon_images/flap_default.png","../src/space_balloon_images/flap_down.png","../src/space_balloon_images/flap_up.png"],star:["../src/space_balloon_enemies/space_balloon_star1.png","../src/space_balloon_enemies/space_balloon_star2.png","../src/space_balloon_enemies/space_balloon_star3.png","../src/space_balloon_enemies/space_balloon_star4.png"],ddr:["../src/ddr/up.png","../src/ddr/down.png","../src/ddr/left.png","../src/ddr/right.png","../src/ddr/victory.png","../src/ddr/defeat.png","../src/ddr/neutral.png"]},i={up:["../src/ddr_dirs/up_arrow1.png","../src/ddr_dirs/up_arrow2.png","../src/ddr_dirs/up_arrow3.png","../src/ddr_dirs/up_arrow4.png"],down:["../src/ddr_dirs/down_arrow1.png","../src/ddr_dirs/down_arrow2.png","../src/ddr_dirs/down_arrow3.png","../src/ddr_dirs/down_arrow4.png"],left:["../src/ddr_dirs/left_arrow1.png","../src/ddr_dirs/left_arrow2.png","../src/ddr_dirs/left_arrow3.png","../src/ddr_dirs/left_arrow4.png"],right:["../src/ddr_dirs/right_arrow1.png","../src/ddr_dirs/right_arrow2.png","../src/ddr_dirs/right_arrow3.png","../src/ddr_dirs/right_arrow4.png"]},r=class{constructor(e,t,s,i,r,a,o){this.stage=e,this.player=t,this.obstacles=s||[],this.bgm=i,this.objective=r,"ddr"===this.objective&&(this.bgm.volume=.4),this.won=!1,this.isGameOver=!1,this.controlSetting=a,this.barAmount=0,this.dialogue=o,this.count=0,this.ddrAnswers=[],this.timeOutFunc=null}reset(e){this.won=!1,this.isGameOver=!1,this.barAmount=0,this.count=0,this.ddrAnswers=[],this.timeOutFunc&&clearTimeout(this.timeOutFunc),this.timeOutFunc=null,this.player.reset(e);for(const t of this.obstacles)t.reset(e,this.player)}stageAnimate(e){!1===this.won&&this.stage.animate(e)}fillBar(){this.barAmount+=this.player.mash()}changeSprite(e){if("blowBar"===e)this.barAmount>=100?(this.player.sprite=s.blowBar[5],this.won=!0):this.barAmount>=80?this.player.sprite=s.blowBar[4]:this.barAmount>=60?this.player.sprite=s.blowBar[3]:this.barAmount>=40?this.player.sprite=s.blowBar[2]:this.barAmount>=20?this.player.sprite=s.blowBar[1]:this.player.sprite=s.blowBar[0];else if("survive"===e){for(const e of this.obstacles){const t=s.star.indexOf(e.sprite);e.sprite=s.star[(t+1)%s.star.length]}if(0===this.count){const e=this;e.timeOutFunc=setTimeout((function(){e.player.isAlive&&(e.won=!0)}),5e3)}this.count+=1}else if("ddr"===e){const e=this,t=["up","down","left","right"];for(0===this.ddrAnswers.length&&(e.obstacles[0].sprite=null);this.ddrAnswers.length<4;)this.ddrAnswers.push(t[Math.floor(Math.random()*t.length)]),setTimeout((function(){e.obstacles[0].sprite=i[e.ddrAnswers[e.count]][e.count],e.count++}),400*this.ddrAnswers.length);if(4===this.ddrAnswers.length)if(this.player.userInputs.length<4)switch(this.player.userInputs.at(-1)){case"up":this.player.sprite=s.ddr[0];break;case"down":this.player.sprite=s.ddr[1];break;case"left":this.player.sprite=s.ddr[2];break;case"right":this.player.sprite=s.ddr[3];break;default:this.player.sprite=s.ddr[6]}else JSON.stringify(this.player.userInputs)===JSON.stringify(this.ddrAnswers)?(this.player.sprite=s.ddr[4],this.won=!0):(this.player.sprite=s.ddr[5],this.isGameOver=!0)}}spriteAnimate(e){if(!1===this.won&&!this.isGameOver){this.player.isAlive||(this.isGameOver=!0),this.changeSprite(this.objective);for(const t of this.obstacles)t.animate(e,this.ddrAnswers),t.unitTypeArr.includes("enemy")&&t.collidesWith(this.player)&&(this.player.isAlive=!1,this.player.sprite="../src/space_balloon_images/space_balloon_death.png");this.player.animate(e)}}},a=class{constructor(e,t){this.stage=e,this.isAnimated=t}animate(e){if(this.stage){let t=new Image;t.src=this.stage,this.isAnimated?t.onload=function(){e.clearRect(0,0,e.canvas.width,e.canvas.height),(o-=2)<=0&&(o=200,(n+=e.canvas.height)>=t.height&&(n=0)),e.drawImage(t,o,n,50,200,0,0,e.canvas.width,e.canvas.height)}:t.onload=function(){e.drawImage(t,0,0,e.canvas.width,e.canvas.height)}}else e.fillStyle="skyblue",e.fillRect(0,0,e.canvas.width,e.canvas.height)}},o=200,n=0;const h={test:new a("../src/windrise-background.png",!1),blow:new a("../src/blow.png",!1),spaceBalloon:new a("../src/space_balloon_background_og.png",!0),ddr:new a("../src/dfloor.png",!1)},l={test:new t(null,"random",["player"]),blow:new t("../src/blow_images/blow1.png","wallRight",["player"]),spaceBalloon:new t("../src/space_balloon_images/flap_default.png","rightSide",["player"]),ddr:new t("../src/ddr/neutral.png","bottomSide",["player"])},c={test:[],blow:[],spaceBalloon:[new t("../src/space_balloon_enemies/space_balloon_star1.png","random",["enemy","movingRight"]),new t("../src/space_balloon_enemies/space_balloon_star2.png","random",["enemy","movingRight"]),new t("../src/space_balloon_enemies/space_balloon_star3.png","random",["enemy","movingRight"]),new t("../src/space_balloon_enemies/space_balloon_star4.png","random",["enemy","movingRight"]),new t("../src/space_balloon_enemies/space_balloon_star1.png","random",["enemy","movingRight"]),new t("../src/space_balloon_enemies/space_balloon_star2.png","random",["enemy","movingRight"]),new t("../src/space_balloon_enemies/space_balloon_star3.png","random",["enemy","movingRight"]),new t("../src/space_balloon_enemies/space_balloon_star4.png","random",["enemy","movingRight"]),new t("../src/space_balloon_enemies/space_balloon_star1.png","random",["enemy","movingRight"]),new t("../src/space_balloon_enemies/space_balloon_star2.png","random",["enemy","movingRight"]),new t("../src/space_balloon_enemies/space_balloon_star3.png","random",["enemy","movingRight"]),new t("../src/space_balloon_enemies/space_balloon_star4.png","random",["enemy","movingRight"])],ddr:[new t("../src/ddr_dirs/up_arrow1.png","topLeft",["friendly"])]},d={blow:new r(h.blow,l.blow,c.blow,new Audio("../src/bgm/thar_he_blows.mp3"),"blowBar","spaceButtonMash","Use Spacebar to Blow"),spaceBalloon:new r(h.spaceBalloon,l.spaceBalloon,c.spaceBalloon,new Audio("../src/bgm/space_balloon.mp3"),"survive","flap","Spacebar to Flap"),ddr:new r(h.ddr,l.ddr,c.ddr,new Audio("../src/bgm/dance.mp3"),"ddr","directions","Follow the Arrows")};let p=[];for(let e=1;e<10;e++)p.push(`src/timer${e}.png`);var m=new Audio("../src/victory.mp3"),g=new Audio("../src/blow.ogg"),u=new Audio("../src/flap.mp3"),y=new Audio("../src/balloon_burst.mp3"),w=new Audio("../src/gameover.mp3"),_=new Audio("../src/correct.mp3"),v=new Audio("../src/wrong.mp3"),b=new Audio("../src/dance_select.mp3"),f=new Audio("../src/loser.mp3");const A=[m,g,u,y,w,_,v,b,f];var T=null,P=!1,x=["m","q"];function M(){for(;x.length>2;)key.unbind(x.pop())}key("m",(()=>{P=!P;for(const e of A)e.pause();P||T!==A.at(-1)||A.at(-1).play()}));const I=document.querySelector("#canvas"),k=document.querySelector("#game_container");I.width=k.offsetWidth,I.height=k.offsetHeight;let S=!1;var E=new Audio("./src/main_menu.mp3");E.play(),E.volume=.3,key("m",(()=>{E&&(S=!S,E.pause(),S||E.play())})),key("q",(()=>{window.location.reload()}));const B=document.querySelector("#startButton");B.addEventListener("click",(function(){B.disabled=!0,E.pause(),E=null,clearInterval(R);const e=document.querySelector("#game_container");I.width=e.offsetWidth,I.height=e.offsetHeight,document.querySelector("#canvas").style.zIndex=2,(new class{constructor(){this.ctx=document.getElementById("canvas").getContext("2d"),this.scoreEle=document.getElementById("score"),this.dialogue=document.getElementById("dialogue"),this.timerBar=document.getElementById("timer_bar"),this.currTime=10,this.maxTime=10,this.score=0,this.lives=3,this.microgame=null,this.running=!1,this.currMicrogameFinished=!1,this.restart=!1,this.timerTimeout=null}play(){this.microgame=this.randomizeMicrogame(),this.microgame?(this.microgame.reset(this.ctx),M(),this.bindKeyHandlers(this.microgame),this.running=!0,this.animate()):console.log("NO MICROGAME WAS SELECTED")}randomizeMicrogame(){const e=Object.values(d),t=Math.floor(Math.random()*e.length);return e[t].reset(this.ctx),T=e[t].bgm,!P&&T&&T.play(),A.push(e[t].bgm),this.dialogue.innerHTML=e[t].dialogue,e[t]}animate(){if(!0===this.running){if(!this.currMicrogameFinished&&!0===this.microgame.won||!0===this.restart||this.microgame.isGameOver&&this.lives>1){if(M(),this.microgame.won=!1,this.restart||this.microgame.isGameOver||(this.incrementScore(),this.scoreEle.innerHTML=`Score: ${this.score}`),this.currMicrogameFinished=!0,m.paused&&!P&&!this.restart){for(const e of A)e.pause(),e.currentTime=0;this.microgame.isGameOver||m.play()}this.microgame.isGameOver&&(this.dialogue.innerHTML="You Died",document.getElementById(`heart${this.lives}`).style.display="none",this.lives--,P||w.play()),this.restart=!1,this.microgame.isGameOver=!1,A.pop();const e=this;setTimeout((function(){e.microgame=e.randomizeMicrogame(),e.bindKeyHandlers(e.microgame),e.resetTimer(),e.startTimer(),e.currMicrogameFinished=!1}),2500)}else if(this.lives<=1&&this.microgame.isGameOver){M(),T=null,clearInterval(this.timerTimeout),this.dialogue.innerHTML="Game Over";const e=this;setTimeout((function(){e.dialogue.innerHTML="Press Q to Restart"}),3e3);for(const e of A)e.pause(),e.currentTime=0;"flap"===this.microgame.controlSetting&&(P||y.play()),document.getElementById(`heart${this.lives}`).style.display="none",this.lives--,P||f.play(),this.running=!1}else this.currTime>0&&!this.currMicrogameFinished&&(this.microgame.stageAnimate(this.ctx),this.microgame.spriteAnimate(this.ctx));window.requestAnimationFrame(this.animate.bind(this))}}incrementScore(){this.score++}startTimer(){this.reduceTime()}stopTimer(){clearTimeout(this.timerTimeout)}setMicrogame(e){this.microgame=e}reduceMaxTimer(){this.maxTime--}reduceTime(){const e=this;e.timerTimeout=setInterval((()=>{e.currTime--}),1e3)}resetTimer(){this.currTime=10}updateTimerbar(){const e=Math.floor((this.maxTime-this.currTime)/8);for(let t=0;t<9;t++)if(console.log("test"),this.currTime<e*t){this.timerBar.src=p.at(-1*t),console.log(this.timerBar.src);break}}bindKeyHandlers(e){switch(e.controlSetting){case"test":key("w",(()=>this.microgame.player.move([0,-this.ctx.canvas.height/50],this.ctx))),key("s",(()=>this.microgame.player.move([0,this.ctx.canvas.height/50],this.ctx))),key("a",(()=>this.microgame.player.move([-this.ctx.canvas.width/50,0],this.ctx))),key("d",(()=>this.microgame.player.move([this.ctx.canvas.width/50,0],this.ctx))),key("up",(()=>this.microgame.player.move([0,-this.ctx.canvas.height/50],this.ctx))),key("down",(()=>this.microgame.player.move([0,this.ctx.canvas.height/50],this.ctx))),key("left",(()=>this.microgame.player.move([-this.ctx.canvas.width/50,0],this.ctx))),key("right",(()=>this.microgame.player.move([this.ctx.canvas.width/50,0],this.ctx))),key("space",(()=>this.microgame.player.jump())),x.push("w","s","a","d","up","down","left","right","space");break;case"spaceButtonMash":key("space",(()=>{this.microgame.fillBar(),g.paused&&!P&&g.play()})),x.push("space");break;case"flap":this.microgame&&(this.microgame.player.isMidAir=!0),key("a",(()=>this.microgame.player.move([-this.ctx.canvas.width/60,0],this.ctx))),key("d",(()=>this.microgame.player.move([this.ctx.canvas.width/60,0],this.ctx))),key("left",(()=>this.microgame.player.move([-this.ctx.canvas.width/60,0],this.ctx))),key("right",(()=>this.microgame.player.move([this.ctx.canvas.width/60,0],this.ctx))),key("space",(()=>{this.microgame.player.flap(),P||(u.currentTime=0,u.play())})),x.push("a","d","left","right","up","down","space");break;case"directions":key("w",(()=>{P||(b.currentTime=0,b.play()),this.microgame.player.ddr("up")})),key("s",(()=>{P||(b.currentTime=0,b.play()),this.microgame.player.ddr("down")})),key("a",(()=>{P||(b.currentTime=0,b.play()),this.microgame.player.ddr("left")})),key("d",(()=>{P||(b.currentTime=0,b.play()),this.microgame.player.ddr("right")})),key("up",(()=>{P||(b.currentTime=0,b.play()),this.microgame.player.ddr("up")})),key("down",(()=>{P||(b.currentTime=0,b.play()),this.microgame.player.ddr("down")})),key("left",(()=>{P||(b.currentTime=0,b.play()),this.microgame.player.ddr("left")})),key("right",(()=>{P||(b.currentTime=0,b.play()),this.microgame.player.ddr("right")})),x.push("w","s","a","d","up","down","left","right");break;default:console.log("keybind error")}}}).play()}));const H=["Let me be your CSS to your HTML","Fork my heart because Im ready to commit","I must be an exception because you have sure caught me","If I pull and push it in, know that I am already committing","If you were a function, Id call you everyday","We can merge, without conflicts","You are my number 0","I cant wait to inject my SQL into your application layer","Are you an API, because Id like to REST with you","Are you garbage because I want to collect you","Those who use git arent afraid to commit","Are you a ES6, youve got some standards","You had me at Hello World","Im overflowing with love for you","You wanna check out my private fields","Sudo make love to me","You dont have bugs, only features","I will debug all your code forever","Can I request a pull","I can resolve my promise to love you forever","... Hello World ..."];let W=1,R=setInterval((()=>{const e=Math.floor(Math.random()*H.length);document.getElementById("dialogue").innerHTML=H[e],W++}),4e3*W)}()}();
//# sourceMappingURL=main.js.map